<div *ngIf="asset" class="asset-viewer" [class.fullscreen]="isFullscreen" (contextmenu)="disableContextMenu($event)">
  <div class="more-results overlay-wrap--center" id="loader-wrapper" *ngIf="state == 0"><i class="icon-asterisk icon-spin icon-large"></i></div>
  <!-- IIIF Image Viewer-->
  <div [class.hidden]="state != 1">
    <div class="item osd-wrap" [attr.id]="'osd-' + asset.id + '-' + index" [attr.zoomValue]="lastZoomValue"></div>
  </div>
  <!-- Video Player-->
  <div class="video-player" [class.hidden]="state != 2">
    <iframe id="{{ 'kalturaIframe-' + index }}" frameborder="0"></iframe>
  </div>
  <!-- Audio Player-->
  <!--<div *ngIf="state == 5">
    <audio class="item video-player" id="audio-{{ asset.id + '-' + index }}" controls>
      <source [attr.src]="asset.downloadLink" type="audio/MPEG">{{ 'audio_error' }}
    </audio>
  </div>-->
  <!--panorama Krpano viewer-->
  <div class="krpano-viewer osd-wrap" [class.hidden]="state != 3">
    <div class="pano" id="pano-{{ index }}"></div>
  </div>
  <!-- Large thumbnail fallback-->
  <div id="fallbackViewer" *ngIf="state == 4"><img class="item item--thumbnail" alt="{{ asset.title }}" [attr.src]="makeThumbUrl(asset.imgURL, thumbnailSize)" (error)="thumbnailError($event)"></div>
  <!--Viewer Buttons-->
  <div class="button-group asset-viewer__buttons" id="imageButtons-{{ asset.id + '-' + index }}">
    <button class="btn btn--icon" [class.hidden]="state != 1" id="zoomIn-{{ asset.id + '-' + index}}" title="Zoom In"><i class="icon icon-zoom-in"></i></button><button class="btn btn--icon" [class.hidden]="state != 1" id="zoomOut-{{ asset.id + '-' + index }}" title="Zoom Out"><i class="icon icon-zoom-out"></i></button><button class="btn btn--icon" [class.hidden]="state != 1" id="zoomFit-{{ asset.id + '-' + index }}" title="Zoom Fit"><i class="icon icon-fit"></i></button><button class="btn btn--icon" *ngIf="!isFullscreen" id="fullScreen-{{ asset.id + '-' + index }}" (click)="togglePresentationMode()" title="Full Screen"><i class="icon icon-fullscreen"></i></button><button class="btn btn--icon" *ngIf="isFullscreen && assetCompareCount > 1" (click)="removeAsset.emit(asset)" title="Remove from Comparison"><i class="icon icon-close"></i></button>
  </div>
  <div class="fullscreen-metadata" *ngIf="isFullscreen" [class.slideAway]="!showCaption">
    <div class="vertical-center-wrap"><i class="icon icon-direction icon-left" *ngIf="assetCompareCount == 1 && !quizMode" [class.disabled]="assetNumber <= 1" title="Previous in results" (click)="prevPage.emit()"></i>
      <div class="title" [innerHtml]="asset.title"></div><i class="icon icon-direction icon-right" *ngIf="assetCompareCount == 1 && !quizMode" [class.disabled]="assetNumber >= assetGroupCount" title="Next in results" (click)="nextPage.emit()"></i>
      <div class="meta-block small">
        <div class="creator" [innerHtml]="asset.creator"></div>
        <div class="date" [innerHtml]="asset.date"></div>
      </div>
    </div>
  </div>
</div>